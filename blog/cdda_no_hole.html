<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Ben Leskey">
    <meta charset="utf-8">
    <title>Ben Leskey | Autodrive into a crater fix</title>
    <link rel="stylesheet" type="text/css" href="../style.css">
    <link rel="alternate" type="application/rss+xml" title="Ben Leskey's RSS feed" href="feed.xml">
    

    <!-- Syntax highlighting with highlight.js -->
    <link rel="stylesheet" href="../deps/highlight.js.css">
    <link rel="stylesheet" href="../deps/highlight.js.dark.css" media="(prefers-color-scheme: dark)">
    <script src="../deps/highlight.js.js"></script>
    <script>
      hljs.highlightAll();
    </script>

    <script>
      window.addEventListener("load", function () {
        for (const img of document.getElementsByTagName("img")) {
          // Make img title equal img alt if the title isn't set
          if (!img.hasAttribute("title")) {
            img.setAttribute("title", img.getAttribute("alt"));
          }

          // If the img isn't part of a link, make it link to itself.
          if (img.parentNode.tagName.toLowerCase() !== "a") {
            const a = document.createElement("a");
            a.setAttribute("href", img.getAttribute("src"));
            img.replaceWith(a);
            a.appendChild(img);
          }
        }
      });
    </script>
  </head>
  <body>
    <nav>
      <a href="..">Ben Leskey</a> | <a href=".">Blog</a>
      <script src="../light-selector.js"></script>
    </nav>
    <hr>
    <header>
      <h1>Autodrive into a crater fix</h1>
      <span class="subtitle">2023-02-08</span>
      <span class="tags"> <a class="tag" href="../blog/tags/cdda">#cdda</a> <a class="tag" href="../blog/tags/debugging">#debugging</a> <a class="tag" href="../blog/tags/software">#software</a></span>
      
    </header>
    <hr>
    <main class="post"><a href="../images/cdda_truck_in_hole.png"><img src="../thumbs/cdda_truck_in_hole.50.png" alt="A pickup truck fallen into a crater in Cataclysm: Dark Days Ahead" class="right"></a>

<p>
	In my current <a href="https://cataclysmdda.org">Cataclysm: Dark Days Ahead</a> <a href="tags/cdda_erik">playthrough</a>, I ran into a problem with the autodrive feature: it'd drive me straight into a crater and crash the vehicle.
</p>

<p>This seemed like a straightforward fix, so I checked out the master branch and set about debugging. Autodrive definitely has the capability to avoid certain terrain, so I guessed it was just a mistake in how it was calculating ledge traps or open air terrain.</p>

<p>Sure enough, it was just an error in how the vehicle was being considered as "able to drive over air". With the existing logic, autodrive thought every vehicle could fly. The fix was simple: only consider helicopters (the only flying vehicle) that have enough rotor power as flyable.</p>

<p>I have <a href="https://github.com/CleverRaven/Cataclysm-DDA/pull/63487">a pull request fixing this issue</a> ready to be merged.</p></main>
    <hr>
    <footer>
      
      <div class="footerinfo">
        <span>Post dated 2023-02-08</span>
         <a class="tag" href="../blog/tags/cdda">#cdda</a> <a class="tag" href="../blog/tags/debugging">#debugging</a> <a class="tag" href="../blog/tags/software">#software</a> <div class="footericons">
	<a class="icon" href="https://gitlab.com/linewriter1024" title="Gitlab @linewriter1024"><img src="https://upload.wikimedia.org/wikipedia/commons/3/35/GitLab_icon.svg" alt="Gitlab account"></a>

	<a class="icon" href="https://github.com/linewriter1024" title="Github @linewriter1024"><img src="https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg" alt="Github account"></a>

	<a class="icon" href="https://www.linkedin.com/in/benleskey"><img src="https://upload.wikimedia.org/wikipedia/commons/8/81/LinkedIn_icon.svg" alt="LinkedIn profile"></a>

	<a class="icon" href="../blog/feed.xml" title="RSS feed"><img src="https://upload.wikimedia.org/wikipedia/commons/4/43/Feed-icon.svg" alt="RSS feed"></a>

	<a class="icon" href="https://lichess.org/@/beha" title="Lichess @beha"><img src="https://upload.wikimedia.org/wikipedia/commons/d/da/Lichess_Logo_2019.svg" alt="Lichess"></a>
</div>
      </div>
    </footer>
    <script id="diffblog-plugin-script" defer src="https://diff.blog/static/js/diffblog_plugin_v1.js"></script>
    <script>
      document
        .getElementById("diffblog-plugin-script")
        .addEventListener("load", function () {
          if (window.location.hostname === "benleskey.com") {
            DiffBlog("4ueakreaad4synt32tf40kmwalpfu5wwbrqany53viw9hka20x");
          }
        });
    </script>
  </body>
</html>